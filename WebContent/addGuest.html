<!DOCTYPE HTML> 
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

</head>
<body> 
<script>

$.urlParam = function(name){
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
    if (results==null){
       return null;
    }
    else{
       return results[1] || 0;
    }
}
function cancel(){
	window.location.assign("guestList.html?id="+$.urlParam('eventid')+"&anthony=anthony");
}
$(document).ready(function() {

	$("#addbtn").on('click', function (e){
		
		var guestName =$('#name').val();
		var note = $('#relationshipDescriptor').val();
		
		$.ajax( { 
			url:"/eventplannerJava/eventplanner/guestservice/guests",
			type: "POST",
			dataType: "json",
			contentType: "application/json",
			data: '{'+
				'"guestlist": { "id" :' + $.urlParam('eventid') + '},' +
				'"name" : "'+guestName+'",'+
				'"relationshipDescriptor" :"'+ note+'"'+
			"}",
			statusCode: {
				200: function(response) {
					 window.location.assign("guestList.html?id="+$.urlParam('eventid')+"&anthony=anthony");				 
			  	}
			}
		});
	});
});

function confirmLogout(){
    agree = confirm("Do you want to logout?");
     if(agree){
 		window.location.assign("Logout.html");
 	}
}
</script>
<div>
<ul class="nav">
<li><a href="eventList.html">Event</a></li>
<li><a href="customerList.html">Customer</a></li>
<li><a href="userList.html">Users</a></li>
<li class="logouttab pull-right" role="presentation"><a onclick ="confirmLogout();" href="#">Logout</a></li>
</ul>
</div>
<h2>Add Guest</h2>
<p id ='debug'></p>
<div class ='block-center'>
<p><span class="error-head">* required field.</span></p>
<form id="guestForm" method="post">
   Guest Name: <input type="text" id="name">
   <span id="nameErr" class="error">* </span>
   <br><br>
   Note: <input type="text" id="relationshipDescriptor">
   <span id="relationshipDescriptorErr" class="error">* </span>
   
   <br><br>
</form>
   <button id="addbtn" name="Add" value="Add"> Add </button>

<button id="cancelbtn" onclick="cancel();">Cancel</button>
</div>
</body>
</html>